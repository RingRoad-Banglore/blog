---
title: Uva 10027  Language Cardinality
---


```
A (formal) language is a set of strings. One way to define a particular language is using ordinary set
notation. Alternatively, some form of grammar may be more convenient for representing large sets.
The UW grammar in which we are interested has two parts:

 An initial string

 A set of replacement rules of the form s1 -> s2 where s1 and s2 are strings

The language defined by this grammar is the set of all strings that can be generated by repeatedly
replacing s1 by s2 within the initial string. For example, consider the grammar G consisting of the
initial string

"AyB"

and the replacement rules

{"A"->"ab", "Ay"->"cdy", "B"->"w", "B"->"x"} .

G generates the language

L = {"AyB", "Ayw", "Ayx", "abyB", "abyw", "abyx", "cdyB", "cdyw", "cdyx"}
Given a UW grammar G, compute how many different strings there are in the language generated

by G.
```

## Input

```
The input begins with a single positive integer on a line by itself indicating the number
of the cases following, each of them as described below. This line is followed by a blank
line, and there is also a blank line between two consecutive inputs.

The first line of input contains the initial string. The second and subsequent lines contain the
replacement rules, one per line, terminated by end-of-file. There are at most 100 replacement rules.
Each input string contains between 0 and 10 upper and lower case letters, and is enclosed in quotes.
There are no spaces in the input.

```

## Output

```
For each test case, the output must follow the description below. The outputs of two
consecutive cases will be separated by a blank line.

Output consists of a single integer, the number of distinct strings in the language generated by G.
If there are more than 1000 distinct strings, print Too many. instead.

```

## Sample Input

```
1

"AyB"
"A"->"ab"
"Ay"->"cdy"
"B"->"w"
"B"->"x"



Universidad de Valladolid OJ: 10027  Language Cardinality 2/2

```

## Sample Output

```
9
```
