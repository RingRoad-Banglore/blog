---
title: Uva 10526  Intellectual Property
---

10526 Intellectual Property
TDP Inc. has decided to sue JCN Inc. for copy-
right infringement. To this end, TDP wishes
to find infringing segments within JCN’s code
base, to show to selected media representatives.
Since TDP has fired all its technical staff, it is
looking to hire a consultant to be paid on a con-
tingency basis should the lawsuit be successful.
To demonstrate your qualifications for this po-
sition, you are to solve the problem on a number
of test cases.

## Input
Each test case begins with a positive integer k, the number of infringing segments to be found. Following
this line are two code bases. The first code base is preceded by the line ‘BEGIN TDP CODEBASE’ and
contains a number of lines followed by the line ‘END TDP CODEBASE’. The second code base is preceded
by ‘BEGIN JCN CODEBASE’ and followed by ‘END JCN CODEBASE’. The line ‘END TDP CODEBASE’ does not
appear in the first code base and the line ‘END JCN CODEBASE’ does not appear in the second. A line
containing ‘0’ follows the last test case.

## Output
For each test case you should output:

1. a line containing ‘CASE n’ where n is the number of the test case;

2. up to k infringing segments. Each segment should be printed exactly as it appears in the JCN code
base (including newlines and whitespace) and should be preceded by a line containing ‘INFRINGING
SEGMENT m LENGTH l POSITION p’ where m is the number of the segment within the test case,
l is the length of the segment (in characters) and p is the position of the segment (in characters
from the start of the JCN codebase).

Output an empty line between test cases.

A code base is simply a string of characters. An infringing segment is a non-empty contiguous
sequence of characters in the JCN code base that is textually identical to some contiguous sequence
of characters in the TDP code base, and is not contained in a larger infringing segment. You should
consider all characters in the code base, including spaces and the newline character at the end of each
line.

If there are k or fewer common segments, print them all in decreasing order by length; if several
segments have the same length, print them in the order they occur in JCN’s code base. If there are
more than k segments, print the first k according to the given order.

You may assume that no code base contains more than 50,000 characters.

## Sample Input
<p>6</p><p>BEGIN TDP CODEBASE</p><p></p><p></p><p></p><p>Universidad de Valladolid OJ: 10526 – Intellectual Property 2/2</p><p></p><p>the quick brown fox</p><p>jumps over the lazy dog.</p><p>so there!</p><p>END TDP CODEBASE</p><p>BEGIN JCN CODEBASE</p><p>now is the time for all</p><p>good men to come to the aid</p><p>of the party.</p><p>so there!</p><p>END JCN CODEBASE</p><p>100</p><p>BEGIN TDP CODEBASE</p><p>xyzzy</p><p>END TDP CODEBASE</p><p>BEGIN JCN CODEBASE</p><p>xyzzabczzyy</p><p>END JCN CODEBASE</p><p>0</p><p></p>

## Sample Output
<p>CASE 1</p><p>INFRINGING SEGMENT 1 LENGTH 12 POSITION 64</p><p>.</p><p>so there!</p><p></p><p>INFRINGING SEGMENT 2 LENGTH 5 POSITION 6</p><p>the</p><p></p><p>INFRINGING SEGMENT 3 LENGTH 5 POSITION 42</p><p>o the</p><p>INFRINGING SEGMENT 4 LENGTH 5 POSITION 43</p><p>the</p><p></p><p>INFRINGING SEGMENT 5 LENGTH 5 POSITION 54</p><p>the</p><p></p><p>INFRINGING SEGMENT 6 LENGTH 3 POSITION 15</p><p>fo</p><p></p><p>CASE 2</p><p>INFRINGING SEGMENT 1 LENGTH 4 POSITION 0</p><p>xyzz</p><p>INFRINGING SEGMENT 2 LENGTH 3 POSITION 7</p><p>zzy</p><p>INFRINGING SEGMENT 3 LENGTH 2 POSITION 10</p><p>y</p>