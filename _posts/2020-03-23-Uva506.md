---
title: Uva 00506  System Dependencies
---

506 System Dependencies

Components of computer systems often have dependencies—other components that must be installed
before they will function properly. These dependencies are frequently shared by multiple components.
For example, both the TELNET client program and the FTP client program require that the TCP/IP
networking software be installed before they can operate. If you install TCP/IP and the TELNET
client program, and later decide to add the FTP client program, you do not need to reinstall TCP/IP.

For some components it would not be a problem if the components on which they depended were
reinstalled; it would just waste some resources. But for others, like TCP/IP, some component configu-
ration may be destroyed if the component was reinstalled.

It is useful to be able to remove components that are no longer needed. When this is done, compo-
nents that only support the removed component may also be removed, freeing up disk space, memory,
and other resources. But a supporting component, not explicitly installed, may be removed only if all
components which depend on it are also removed. For example, removing the FTP client program and
TCP/IP would mean the TELNET client program, which was not removed, would no longer operate.
Likewise, removing TCP/IP by itself would cause the failure of both the TELNET and the FTP client
programs. Also if we installed TCP/IP to support our own development, then installed the TELNET
client (which depends on TCP/IP) and then still later removed the TELNET client, we would not want
TCP/IP to be removed.

We want a program to automate the process of adding and removing components. To do this
we will maintain a record of installed components and component dependencies. A component can
be installed explicitly in response to a command (unless it is already installed), or implicitly if it is
needed for some other component being installed. Likewise, a component, not explicitly installed, can
be explicitly removed in response to a command (if it is not needed to support other components)
or implicitly removed if it is no longer needed to support another component. Installing an already
implicitly-installed component won’t make that component become explicity installed.

## Input

The input file contains several test cases, each of them as described below.

The input will contain a sequence of commands (as described below), each on a separate line
containing no more than eighty characters. Item names are case sensitive, and each is no longer than
ten characters. The command names (DEPEND, INSTALL, REMOVE and LIST) always appear in uppercase
starting in column one, and item names are separated from the command name and each other by one
or more spaces. All appropriate DEPEND commands will appear before the occurrence of any INSTALL
command that uses them. There will be no circular dependencies. The end of the input is marked by
a line containing only the word END.

Command Syntax Interpretation/Response

DEPEND item1 item2 [item3 ...] item1 depends on item2 (and item3 ...)

INSTALL item1 install item1 and those on which it depends

REMOVE item1 remove item1, and those on which it depends, if possible

LIST list the names of all currently-installed components



Universidad de Valladolid OJ: 506 – System Dependencies 2/3

## Output

For each test case, the output must follow the description below.
Echo each line of input. Follow each echoed INSTALL or REMOVE line with the actions taken in

response, making certain that the actions are given in the proper order. Also identify exceptional
conditions (see Sample Output, below, for examples of all cases). For the LIST command, display the
names of the currently installed components in the installation order. No output, except the echo, is
produced for a DEPEND command or the line containing END. There will be at most one dependency list
per item.

## Sample Input
<p></p><p>DEPEND TELNET TCPIP NETCARD</p><p></p><p>DEPEND TCPIP NETCARD</p><p></p><p>DEPEND DNS TCPIP NETCARD</p><p></p><p>DEPEND BROWSER TCPIP HTML</p><p></p><p>INSTALL NETCARD</p><p></p><p>INSTALL TELNET</p><p></p><p>INSTALL foo</p><p></p><p>REMOVE NETCARD</p><p></p><p>INSTALL BROWSER</p><p></p><p>INSTALL DNS</p><p></p><p>LIST</p><p></p><p>REMOVE TELNET</p><p></p><p>REMOVE NETCARD</p><p></p><p>REMOVE DNS</p><p></p><p>REMOVE NETCARD</p><p></p><p>INSTALL NETCARD</p><p></p><p>REMOVE TCPIP</p><p></p><p>REMOVE BROWSER</p><p></p><p>REMOVE TCPIP</p><p></p><p>END</p><p></p>

## Sample Output
<p></p><p>DEPEND TELNET TCPIP NETCARD</p><p></p><p>DEPEND TCPIP NETCARD</p><p></p><p>DEPEND DNS TCPIP NETCARD</p><p></p><p>DEPEND BROWSER TCPIP HTML</p><p></p><p>INSTALL NETCARD</p><p></p><p>Installing NETCARD</p><p></p><p>INSTALL TELNET</p><p></p><p>Installing TCPIP</p><p></p><p>Installing TELNET</p><p></p><p>INSTALL foo</p><p></p><p>Installing foo</p><p></p><p>REMOVE NETCARD</p><p></p><p>NETCARD is still needed.</p><p></p><p>INSTALL BROWSER</p><p></p><p>Installing HTML</p><p></p><p>Installing BROWSER</p><p></p><p>INSTALL DNS</p><p></p><p></p><p></p><p>Universidad de Valladolid OJ: 506 – System Dependencies 3/3</p><p></p><p>Installing DNS</p><p></p><p>LIST</p><p></p><p>NETCARD</p><p></p><p>TCPIP</p><p></p><p>TELNET</p><p></p><p>foo</p><p></p><p>HTML</p><p></p><p>BROWSER</p><p></p><p>DNS</p><p></p><p>REMOVE TELNET</p><p></p><p>Removing TELNET</p><p></p><p>REMOVE NETCARD</p><p></p><p>NETCARD is still needed.</p><p></p><p>REMOVE DNS</p><p></p><p>Removing DNS</p><p></p><p>REMOVE NETCARD</p><p></p><p>NETCARD is still needed.</p><p></p><p>INSTALL NETCARD</p><p></p><p>NETCARD is already installed.</p><p></p><p>REMOVE TCPIP</p><p></p><p>TCPIP is still needed.</p><p></p><p>REMOVE BROWSER</p><p></p><p>Removing BROWSER</p><p></p><p>Removing HTML</p><p></p><p>Removing TCPIP</p><p></p><p>REMOVE TCPIP</p><p></p><p>TCPIP is not installed.</p><p></p><p>END</p>